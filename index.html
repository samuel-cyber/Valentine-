<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Question</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400;1,600&family=Raleway:wght@200;300;400&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --white: #ffffff;
    --off-white: #fdf8f8;
    --pink: #f2a7b3;
    --pink-light: #fdd5dc;
    --pink-soft: #fef0f2;
    --red: #d63950;
    --red-dark: #b52d42;
    --red-light: #e8667a;
    --text-dark: #2a1a1e;
    --text-muted: #8a6a70;
    --shadow: rgba(214, 57, 80, 0.15);
  }

  html, body {
    height: 100%;
    font-family: 'Raleway', sans-serif;
    background: var(--off-white);
    color: var(--text-dark);
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
  }

  /* ─── SOFT BACKGROUND WASH ─── */
  body::before {
    content: '';
    position: fixed; inset: 0;
    background:
      radial-gradient(ellipse 130% 55% at 15% 85%, rgba(242,167,179,0.18) 0%, transparent 55%),
      radial-gradient(ellipse 90% 50% at 85% 15%, rgba(214,57,80,0.08) 0%, transparent 50%),
      radial-gradient(ellipse 70% 60% at 50% 50%, rgba(253,213,220,0.12) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  /* ─── GRAIN ─── */
  body::after {
    content: '';
    position: fixed; inset: 0;
    opacity: 0.022;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 999;
  }

  /* ─── SCREENS ─── */
  .screen {
    position: absolute; inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    opacity: 0;
    transform: translateY(18px);
    transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
    pointer-events: none;
    z-index: 1;
  }
  .screen.active {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  /* ─── TYPOGRAPHY ─── */
  .label-top {
    font-family: 'Raleway', sans-serif;
    font-weight: 200;
    font-size: 0.7rem;
    letter-spacing: 0.38em;
    text-transform: uppercase;
    color: var(--pink);
    margin-bottom: 1.8rem;
  }

  .question {
    font-family: 'Playfair Display', serif;
    font-weight: 400;
    font-size: clamp(1.8rem, 4.8vw, 2.7rem);
    line-height: 1.35;
    text-align: center;
    color: var(--text-dark);
    max-width: 460px;
    margin-bottom: 2.6rem;
  }
  .question em {
    font-style: italic;
    color: var(--red);
  }

  /* ─── DIVIDER ─── */
  .divider {
    width: 38px; height: 1px;
    background: linear-gradient(90deg, transparent, var(--pink), transparent);
    margin: 0 auto 1.4rem;
  }

  /* ─── BUTTONS ─── */
  .btn-row {
    display: flex;
    gap: 1.2rem;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .btn {
    position: relative;
    font-family: 'Raleway', sans-serif;
    font-weight: 300;
    font-size: 0.76rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    padding: 0.9rem 2.2rem;
    border: 1px solid transparent;
    border-radius: 0;
    background: transparent;
    cursor: pointer;
    transition: all 0.35s cubic-bezier(.4,0,.2,1);
    outline: none;
    white-space: nowrap;
    user-select: none;
    -webkit-user-select: none;
  }

  .btn-yes {
    background: var(--red);
    color: var(--white);
    border-color: var(--red);
  }
  .btn-yes:hover {
    background: var(--red-dark);
    border-color: var(--red-dark);
    transform: translateY(-1px);
    box-shadow: 0 6px 28px var(--shadow);
  }
  .btn-yes:active { transform: translateY(0); }

  .btn-no {
    background: transparent;
    color: var(--text-muted);
    border-color: var(--pink-light);
    transition: all 0.25s cubic-bezier(.4,0,.2,1);
  }
  .btn-no:hover {
    border-color: var(--pink);
    color: var(--red-light);
  }

  /* ─── DEAD END ─── */
  #screen-end-no .question {
    color: var(--text-muted);
    font-size: clamp(1.2rem, 3vw, 1.7rem);
  }

  /* ─── YES SCREEN ─── */
  #screen-yes { background: transparent; }

  #screen-yes .card {
    max-width: 500px;
    width: 100%;
    text-align: center;
    position: relative;
    z-index: 2;
  }
  #screen-yes .card-top {
    font-family: 'Raleway', sans-serif;
    font-weight: 200;
    font-size: 0.66rem;
    letter-spacing: 0.42em;
    text-transform: uppercase;
    color: var(--pink);
    margin-bottom: 1.8rem;
    opacity: 0;
    animation: fadeSlideUp 0.7s 0.3s forwards;
  }
  #screen-yes .card-title {
    font-family: 'Playfair Display', serif;
    font-weight: 600;
    font-size: clamp(2.1rem, 5.2vw, 3.1rem);
    line-height: 1.25;
    color: var(--red);
    margin-bottom: 1.8rem;
    opacity: 0;
    animation: fadeSlideUp 0.7s 0.5s forwards;
  }
  #screen-yes .card-line {
    width: 34px; height: 1px;
    background: var(--pink);
    margin: 0 auto 1.8rem;
    opacity: 0;
    animation: fadeIn 0.6s 0.75s forwards;
  }
  #screen-yes .card-body {
    font-family: 'Playfair Display', serif;
    font-weight: 400;
    font-style: italic;
    font-size: clamp(1.05rem, 2.2vw, 1.2rem);
    line-height: 1.9;
    color: var(--text-muted);
    opacity: 0;
    animation: fadeSlideUp 0.8s 0.95s forwards;
  }
  #screen-yes .card-sign {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-weight: 400;
    font-size: 1.05rem;
    color: var(--red);
    margin-top: 2rem;
    opacity: 0;
    animation: fadeSlideUp 0.7s 1.3s forwards;
  }

  /* ─── FLOATING HEARTS ─── */
  .heart {
    position: fixed;
    pointer-events: none;
    z-index: 1;
    opacity: 0;
    animation: heartFall linear forwards;
  }
  .heart svg {
    width: 100%; height: 100%;
    display: block;
  }

  @keyframes heartFall {
    0%   { transform: translateY(0) rotate(0deg) scale(1); opacity: 0; }
    8%   { opacity: 1; }
    85%  { opacity: 0.7; }
    100% { transform: translateY(105vh) rotate(360deg) scale(0.6); opacity: 0; }
  }

  /* ─── AMBIENT PARTICLES ─── */
  .particle {
    position: fixed;
    border-radius: 50%;
    background: var(--pink-light);
    opacity: 0;
    pointer-events: none;
    z-index: 0;
    animation: particleDrift linear infinite;
  }
  @keyframes particleDrift {
    0%   { transform: translateY(0) translateX(0); opacity: 0; }
    12%  { opacity: 0.4; }
    88%  { opacity: 0.2; }
    100% { transform: translateY(-100vh) translateX(25px); opacity: 0; }
  }

  /* ─── SHARED KEYFRAMES ─── */
  @keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(14px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  /* ─── NO BUTTON ESCAPE ─── */
  .btn-no.escaping {
    transition: left 0.18s cubic-bezier(.2,.8,.3,1), top 0.18s cubic-bezier(.2,.8,.3,1) !important;
  }

  /* ─── MOBILE HINT ─── */
  .touch-hint {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Raleway', sans-serif;
    font-weight: 200;
    font-size: 0.58rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--pink);
    opacity: 0.6;
    text-align: center;
    z-index: 2;
    pointer-events: none;
    display: none;
  }
  @media (hover: none) {
    .touch-hint { display: block; }
  }

  @media (max-height: 500px) {
    .question { font-size: 1.4rem; margin-bottom: 1.8rem; }
    .btn { padding: 0.7rem 1.6rem; font-size: 0.68rem; }
  }
</style>
</head>
<body>

<!-- STEP 1 -->
<div id="screen-1" class="screen active">
  <p class="label-top">A moment</p>
  <div class="question">Are you a <em>girl</em>?</div>
  <div class="divider"></div>
  <div class="btn-row">
    <button class="btn btn-yes" onclick="goTo('screen-2')">Yes</button>
    <button class="btn btn-no" onclick="goTo('screen-end-no')">No</button>
  </div>
</div>

<!-- STEP 2 -->
<div id="screen-2" class="screen">
  <p class="label-top">Good to know</p>
  <div class="question">Are you <em>straight</em>?</div>
  <div class="divider"></div>
  <div class="btn-row">
    <button class="btn btn-yes" onclick="goTo('screen-3')">Yes</button>
    <button class="btn btn-no" onclick="goTo('screen-end-no')">No</button>
  </div>
</div>

<!-- STEP 3 — NO escapes -->
<div id="screen-3" class="screen">
  <p class="label-top">Here it is</p>
  <div class="question">Will you be my <em>valentine</em>?</div>
  <div class="divider"></div>
  <div class="btn-row" id="val-btn-row">
    <button class="btn btn-yes" onclick="goTo('screen-yes')">Yes</button>
    <button class="btn btn-no" id="no-btn" tabindex="-1">No</button>
  </div>
</div>

<!-- YES REVEAL -->
<div id="screen-yes" class="screen">
  <div class="card">
    <p class="card-top">February 14</p>
    <h1 class="card-title">I'm glad<br>you said yes.</h1>
    <div class="card-line"></div>
    <p class="card-body">
      There's something about you that doesn't need a grand stage —<br>
      just the quiet certainty that you're the one I'd choose<br>
      to sit next to on an ordinary evening<br>
      and still feel like I'm exactly where I'm supposed to be.
    </p>
    <p class="card-sign">— yours this Valentine's</p>
  </div>
</div>

<!-- DEAD END -->
<div id="screen-end-no" class="screen">
  <p class="label-top">Noted</p>
  <div class="question">That's fair.<br><em>Maybe next time.</em></div>
  <div class="divider"></div>
  <button class="btn btn-yes" onclick="goTo('screen-1')" style="margin-top:0.4rem;">← Back</button>
</div>

<div class="touch-hint">Tap carefully — things might move</div>

<script>
// ─── NAVIGATION ───
function goTo(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if (id === 'screen-3') initNoBtn();
  if (id === 'screen-yes') startHearts();
}

// ─── PARTICLES ───
(function() {
  for (let i = 0; i < 16; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + 'vw';
    p.style.animationDuration = (9 + Math.random() * 13) + 's';
    p.style.animationDelay = (Math.random() * 14) + 's';
    const sz = 2 + Math.random() * 2.5;
    p.style.width = p.style.height = sz + 'px';
    document.body.appendChild(p);
  }
})();

// ─── NO BUTTON ESCAPE ───
let noBtn, escapeActive = false;

function initNoBtn() {
  noBtn = document.getElementById('no-btn');
  if (!noBtn) return;
  noBtn.style.position = 'relative';
  noBtn.style.left = '0';
  noBtn.style.top = '0';
  escapeActive = true;
  document.addEventListener('mousemove', onMouseMove);
  document.addEventListener('touchmove', onTouchMove, { passive: true });
  document.addEventListener('touchstart', onTouchStart, { passive: true });
}

function getNoPos() {
  const r = noBtn.getBoundingClientRect();
  return { cx: r.left + r.width / 2, cy: r.top + r.height / 2, w: r.width, h: r.height };
}

function onMouseMove(e) {
  if (!escapeActive || !noBtn || !document.getElementById('screen-3').classList.contains('active')) return;
  const pos = getNoPos();
  const dx = e.clientX - pos.cx;
  const dy = e.clientY - pos.cy;
  const dist = Math.hypot(dx, dy);
  if (dist < 70) nudgeAway(dx, dy, dist);
}

function onTouchStart(e) {
  if (!escapeActive || !noBtn || !document.getElementById('screen-3').classList.contains('active')) return;
  checkMobileTrigger(e.touches[0].clientX, e.touches[0].clientY);
}

function onTouchMove(e) {
  if (!escapeActive || !noBtn || !document.getElementById('screen-3').classList.contains('active')) return;
  checkMobileTrigger(e.touches[0].clientX, e.touches[0].clientY);
}

function checkMobileTrigger(tx, ty) {
  const pos = getNoPos();
  const dx = tx - pos.cx;
  const dy = ty - pos.cy;
  const dist = Math.hypot(dx, dy);
  if (dist < 58) nudgeAway(dx, dy, dist);
}

function nudgeAway(dx, dy, dist) {
  const nx = -dx / dist;
  const ny = -dy / dist;
  const jump = 100 + Math.random() * 60;
  const currentLeft = parseFloat(noBtn.style.left) || 0;
  const currentTop  = parseFloat(noBtn.style.top)  || 0;
  let newLeft = currentLeft + nx * jump;
  let newTop  = currentTop  + ny * jump;

  const pad = 22;
  const vw = window.innerWidth;
  const vh = window.innerHeight;
  const r  = noBtn.getBoundingClientRect();
  const absLeft = r.left + (newLeft - currentLeft);
  const absTop  = r.top  + (newTop  - currentTop);

  if (absLeft < pad)                    newLeft += (pad - absLeft);
  if (absLeft + r.width > vw - pad)     newLeft -= (absLeft + r.width - vw + pad);
  if (absTop  < pad)                    newTop  += (pad - absTop);
  if (absTop  + r.height > vh - pad)    newTop  -= (absTop  + r.height - vh + pad);

  noBtn.classList.add('escaping');
  noBtn.style.left = newLeft + 'px';
  noBtn.style.top  = newTop  + 'px';
  setTimeout(() => noBtn && noBtn.classList.remove('escaping'), 220);
}

// ─── HEARTS FLOOD ───
let heartsInterval = null;

function heartSVG(color) {
  return `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="${color}"/>
  </svg>`;
}

function spawnHeart() {
  const heart = document.createElement('div');
  heart.className = 'heart';

  // Random size
  const size = 18 + Math.random() * 38;
  heart.style.width = size + 'px';
  heart.style.height = size + 'px';

  // Random starting X
  heart.style.left = (Math.random() * 92 + 2) + 'vw';
  heart.style.top = '-' + (size + 10) + 'px';

  // Pick color: white, pink, or red
  const colors = ['#ffffff', '#f2a7b3', '#d63950', '#fdd5dc', '#e8667a'];
  heart.innerHTML = heartSVG(colors[Math.floor(Math.random() * colors.length)]);

  // Random fall duration
  const dur = 4 + Math.random() * 5;
  heart.style.animationDuration = dur + 's';

  // Shadow for depth
  heart.style.filter = 'drop-shadow(0 2px 4px rgba(214,57,80,0.2))';

  document.body.appendChild(heart);

  // Remove after animation
  setTimeout(() => heart.remove(), dur * 1000 + 100);
}

function startHearts() {
  // Initial burst
  for (let i = 0; i < 12; i++) {
    setTimeout(spawnHeart, i * 80);
  }
  // Continuous rain
  heartsInterval = setInterval(() => {
    spawnHeart();
    if (Math.random() < 0.4) spawnHeart(); // occasional doubles
  }, 600);
}

// Stop hearts when navigating away
const _goTo = goTo;
goTo = function(id) {
  if (id !== 'screen-yes' && heartsInterval) {
    clearInterval(heartsInterval);
    heartsInterval = null;
  }
  if (id !== 'screen-3') escapeActive = false;
  _goTo(id);
};
</script>
</body>
</html>
